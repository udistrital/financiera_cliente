<div class="col-centered">
  <div class="panel panel-default" ng-hide='cdpAnulacion.formVisibility'>
    <div class="panel-heading">
      <h2>Lista de CDP para Anular</h2>
    </div>
    <div class="panel-body">
      <div ui-grid="cdpAnulacion.gridOptions" ui-grid-selection class="myGrid"></div>
    </div>
  </div>
</div>
<div id="myModal" class="modal fade col-md-12" role="dialog">
  <div class="modal-content col-md-offset-1 col-md-10">
    <div class="modal-header">
      <div class="row">
        <div class="col-md-4">
          <label>Anulación del CDP</label>
        </div>
        <div class="col-md-offset-7 col-md-1">
          <button type="button" class="btn btn-outline btn-danger btn-md " data-dismiss="modal">&times</button>
        </div>
      </div>
    </div>
    <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="panel-title">
            Detalle del CDP
          </div>
        </div>
        <div class="panel-body">
          <div >
            <table class="table text-justify">
              <tr>
                <th>Consecutivo: </th>
                <td>{{cdpAnulacion.cdp.NumeroDisponibilidad}}</td>
              </tr>
              <tr>
                <th>Fecha de Registro: </th>
                <td>{{cdpAnulacion.cdp.FechaRegistro | date:"yyyy-MM-dd":"+0900"}}</td>
              </tr>
              <tr>
                <th>Estado: </th>
                <td>{{cdpAnulacion.cdp.Estado.Nombre}}</td>
              </tr>
              <tr>
                <th>Dependencia Solicitante: </th>
                <td>{{cdpAnulacion.cdp.Solicitud.DependenciaSolicitante.Nombre}}</td>
              </tr>
              <tr>
                <th>Jefe de la dependencia: </th>
                <td>{{cdpAnulacion.cdp.Solicitud.DependenciaSolicitante.InfoJefeDependencia.PrimerApellido + ' ' +
                      cdpAnulacion.cdp.Solicitud.DependenciaSolicitante.InfoJefeDependencia.SegundoApellido + ' ' +
                     cdpAnulacion.cdp.Solicitud.DependenciaSolicitante.InfoJefeDependencia.PrimerNombre + ' '+
                    cdpAnulacion.cdp.Solicitud.DependenciaSolicitante.InfoJefeDependencia.SegundoNombre + ' '}}</td>
              </tr>
              <tr>
                <th>Dependencia Destino: </th>
                <td>{{cdpAnulacion.cdp.Solicitud.DependenciaDestino.Nombre}}</td>
              </tr>
              <tr>
                <th>Ordenador del Gasto: </th>
                <td>{{cdpAnulacion.cdp.Solicitud.DependenciaSolicitante.InfoOrdenador.PrimerApellido + ' ' +
                      cdpAnulacion.cdp.Solicitud.DependenciaSolicitante.InfoOrdenador.SegundoApellido + ' ' +
                     cdpAnulacion.cdp.Solicitud.DependenciaSolicitante.InfoOrdenador.PrimerNombre + ' '+
                    cdpAnulacion.cdp.Solicitud.DependenciaSolicitante.InfoOrdenador.SegundoNombre + ' '}}</td>
              </tr>
              <tr>
                <th>Objeto: </th>
                <td>{{cdpAnulacion.cdp.Solicitud.SolicitudDisponibilidad.Necesidad.Objeto}}</td>
              </tr>
            </table>
          </div>
        </div>
      </div>


          <div class="panel panel-default">
            <div class="panel-heading">
              <div class="panel-title">
                Rubros para este CDP
              </div>
            </div>
            <div ui-grid="cdpAnulacion.gridOptions_rubros" ui-grid-selection ui-grid-auto-resize ng-style="cdpAnulacion.gridHeight" class="myGrid"></div>
          </div>


      <form class="form-ctrl">
        <div class="panel panel-default">
          <div class="panel-heading">
            <div class="panel-title">
              Anulación de CDP
            </div>
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-md-4">
                <label>Motivo de la Anulación</label>
              </div>
              <div class="col-md-8">
                <textarea class="form-control" id="txtMotivo" name="txtMotivo" ng-model="cdpDetalle.motivo"></textarea>
              </div>
            </div>
            <br>
            <div class="row">
              <div class="col-md-4 ">
                <label>Tipo de Anulación</label>
              </div>
              <div class="col-md-8">
                <select id="slcTipoAnulacion" name="slcTipoAnulacion" class="form-control" ng-model="cdpDetalle.tipoAnulacion">
                    <option value="P">Parcial</option>
                  <option value="T">Total</option>
               </select>
              </div>
            </div>
            <br>
            <div ng-hide="cdpDetalle.tipoAnulacion == 'T'" class="row">
              <div class="col-md-4 ">
                <label>Rubro</label>
              </div>
              <div class="col-md-8">
                <input ng-model="apropiacion.Apropiacion.Rubro.Codigo" id="txtRubro" name="txtRubro" type="text" placeholder="seleccione el rubro" class="form-control input-md" required="" disabled="true">
                <span class="help-block" ng-show="apropiacion.Apropiacion.Rubro.Codigo === null || apropiacion.Apropiacion.Rubro.Codigo === 'undefined'">Debe seleccionar el rubro en la tabla "Rubros para este CDP"</span>
              </div>
            </div>
            <br>
            <div ng-hide="cdpDetalle.tipoAnulacion == 'T' " class="row">
              <div class="col-md-4">
                <label class="control-label" for="txtValor">Valor de la anulación</label>
              </div>
              <div class="col-md-8">
                <input id="txtValor" name="txtValor" type="text" placeholder="Valor que desea anular" class="form-control" required="" ng-model="cdpDetalle.Valor">
              </div>
            </div>
            <!-- Button (Double) -->
            <br>
            <div class="row">
              <div class="col-md-6 col-md-offset-6">
                <div class="col-md-6">
                  <button id="btnAnular" name="btnAnular" class="btn btn-outline btn-warning btn-md btn-block" ng-click="cdpAnulacion.anular()">Anular</button>
                </div>
                <div class="col-md-6">
                  <a id="btnCancelar" name="btnCancelar" class="btn btn-outline btn-primary btn-md btn-block glyphicon glyphicon-chevron-left" ng-click='cdpAnulacion.ShowForm()'> Volver </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
